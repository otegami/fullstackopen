(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(15),u=t.n(a),r=t(6),o=t(3),i=t(4),l=t.n(i),s="http://localhost:3001/api/persons",d=function(){return l.a.get(s).then((function(e){return e.data}))},j=function(e){return l.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(s,"/").concat(e))},f=t(0),m=function(e){var n=e.value,t=e.onChange;return Object(f.jsxs)("div",{children:["filter shown with: ",Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.nameValue,t=e.numberValue,c=e.onNameChange,a=e.onNumberChange,u=e.onClick;return Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:n,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:t,onChange:a})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",onClick:u,children:"add"})})]})},v=function(e){var n=e.person,t=e.handleClick;return Object(f.jsxs)("li",{children:[n.name,": ",n.number,Object(f.jsx)("button",{value:n.id,onClick:t,children:"delete"})]})},p=function(e){var n=e.persons,t=e.handleClick;return Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsx)(v,{person:e,handleClick:t},e.id)}))})},x=function(e){var n=e.message;return null===n?null:null!==n?(console.log(n),Object(f.jsx)("div",{className:"success",children:n})):void 0},g=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),i=Object(o.a)(u,2),l=i[0],s=i[1],v=Object(c.useState)(""),g=Object(o.a)(v,2),C=g[0],k=g[1],w=Object(c.useState)(""),N=Object(o.a)(w,2),S=N[0],y=N[1],V=Object(c.useState)(null),D=Object(o.a)(V,2),T=D[0],A=D[1];Object(c.useEffect)((function(){d().then((function(e){return a(e)}))}),[]);var E=S?t.filter((function(e){return e.name.includes(S)})):t;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(x,{message:T}),Object(f.jsx)(m,{value:S,onChange:function(e){y(e.target.value)}}),Object(f.jsx)("h2",{children:"Add a new"}),Object(f.jsx)(O,{nameValue:l,numberValue:C,onNameChange:function(e){s(e.target.value)},onNumberChange:function(e){k(e.target.value)},onClick:function(e){e.preventDefault();var n=t.find((function(e){return e.name===l}));if(void 0===n){var c={id:t.length+1,name:l,number:C};j(c).then((function(e){a(t.concat(e)),s(""),k(""),A("Added ".concat(e.name))})).catch(),setTimeout((function(){A(null)}),3e3)}else if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var u=Object(r.a)(Object(r.a)({},n),{},{number:C});b(n.id,u).then((function(e){a(t.map((function(n){return n.name===l?e:n}))),A("Changed ".concat(e.name,"'s number!")),setTimeout((function(){A(null)}),3e3)})).catch((function(e){A("Information of ".concat(u.name," has already been removed from server")),setTimeout((function(){A(null)}),3e3)}))}}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(p,{persons:E,handleClick:function(e){e.preventDefault();var n=Number(e.target.value),c=t.find((function(e){return e.id===n}));window.confirm("Delete ".concat(c.name,"?"))&&(h(n),a(t.filter((function(e){return e.id!==n}))))}})]})};t(39);u.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.af004eed.chunk.js.map